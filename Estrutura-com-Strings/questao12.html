<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Estrutura com Strings - Questão 12</title>
	</head>
	<body>
		<script type="text/javascript">
			/*Valida e corrige número de telefone. Faça um programa que leia um número de telefone, e corrija o número no caso deste conter somente 7 dígitos, acrescentando o '3' na frente. O usuário pode informar o número com ou sem o traço separador.
            Valida e corrige número de telefone
            Telefone: 461-0133
            Telefone possui 7 dígitos. Vou acrescentar o digito três na frente.
            Telefone corrigido sem formatação: 34610133
            Telefone corrigido com formatação: 3461-0133*/
			
			let telefone = prompt('Informe o telefone (xxxx-xxxx)');
            regex = /^[0-9]{3}\-[0-9]{4}$|^[0-9]{7}$|[0-9]{4}\-[0-9]{4}$|^[0-9]{8}$/; 
            // Validar cnpj basta add | e a máscara. ex. "([0-9]{3}\.[0-9]{3}\.[0-9]{3}\-[0-9]{2} | [0-9]{2}\.[0-9]{3}\.[0-9]{3}\/[0-9]{4}\-[0-9]{2})"
            valida_telefone = telefone.search(regex); //== -1 ? "Telefone Inválido" : "Telefone Válido";
			//alert(valida_telefone);
            if (valida_telefone == -1) { //&& (telefone.length < 8 || telefone.length > 9)) {
                alert('Número completamente errado');
                exit();
            }
            else if (telefone.length == 7) {
                telefone = '3' + telefone.slice(0,3) + '-' + telefone.slice(3);
            }
            else if (telefone.length == 8) {
                telefone = telefone.slice(0,4) + '-' + telefone.slice(4);
            }
            alert('Telefone sem formatação ' + telefone.split('-').join('') + '\nTelefone com formatação ' + telefone);
		</script>
	</body>
</html>